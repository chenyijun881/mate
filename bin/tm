#!/usr/bin/env ruby

require 'mate'

if !ARGV.empty? && ARGV.all?(&File.method(:exist?)) && ARGV.any?(&File.method(:directory?))
  Mate::Tmproj.new(ARGV).open
else
  mate = (IO.popen('which -a mate', &:readlines).map(&:strip) - [__FILE__]).first
  system mate, *ARGV
end
