#!/usr/bin/env ruby

begin
  require 'mate'
rescue LoadError
  require 'rubygems'
  require 'mate'
end

mate = (IO.popen('which -a mate', &:readlines).map(&:strip) - [__FILE__]).first

if !ARGV.empty? && ARGV.all?(&File.method(:exist?)) && ARGV.any?(&File.method(:directory?))
  Mate::Tmproj.new(ARGV).open
else
  system mate, *ARGV
end
